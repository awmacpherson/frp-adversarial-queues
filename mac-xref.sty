%
% BIBLIOGRAPHY AND CROSS-REFERENCING
%
% v2.0.0
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mac-xref}

\RequirePackage{mac-util}

\pgfkeys{biblatex/backend/.code={\PassOptionsToPackage{backend=#1}{biblatex}}}
\pgfkeys{biblatex/backend=biber}
%\pgfkeys{biblatex/style/.code={\PassOptionsToPackage{style=#1}{biblatex}}}
%\pgfkeys{biblatex/style=alphabetic}
\ProcessPGFOptions

%

\RequirePackage[style=alphabetic]{biblatex}
\setcounter{biburllcpenalty}{1}   % freely break URLs at lowercase

% use \addbibresource to register .bib databases

% Legacy syntax (LaTeX): place
%
% \bibliography{<bibpath>}
% \bibliographystyle{alpha}
%
% where you wish the bibliography to appear. Generates a list environment.

% About backends:
% bibtex reads both the .aux file and .bib file.
% biber reads ONLY the .bcf file which is generated by biblatex 
% when backend=biber.
%
% About biblatex:
% loads etoolbox
% Use \nopp to suppress p. pp. in postnote. 
% Alternatively, change pagination field in bib entry.
% For arXiv compatibility require versions:
%  .bbl format 2.8 biblatex 3.7 Biber 2.7
%  (as of May 2020, arXiv uses TeXLive 2016)

\RequirePackage{csquotes} % prevents a warning for using biblatex with babel


%
%%% CROSS REFERENCING %%%%%%%%%%%%%%%%%%%%%%
%

% These packages must be loaded after amsmath because the latter redefines
% the \label command for equation numbering.

% This is the tool to make documents interdependent.
% It is used by stacksproject.

\RequirePackage[colorlinks=true,
                linkcolor=teal,
                citecolor=olive,
                destlabel=true,
                bookmarks=true]{hyperref}

% Turns cross-references into links by redefining \refstepcounter
% Turns citations into links by redefining \bibcite
% Turns amsmath equation numbers into links by unknown wizardry
% Provides \href{}{}

\RequirePackage{bookmark}

% Patches hyperref so that it only needs one run and no auxiliary file 
% (otherwise .out is generated). Cf. https://ctan.org/pkg/bookmark
